<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>nacos 配置中心的使用 | 逆天改命</title><meta name=google-adsense-account content="ca-pub-7732072032123305"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=keywords content><meta name=description content="pom配置 在根pom.xml中设置
<dependencyManagement> <dependencies> <dependency> <groupId>com.alibaba.cloud</groupId> <artifactId>spring-cloud-alibaba-dependencies</artifactId> <version>2.2.1.RELEASE</version> <type>pom</type> <scope>import</scope> </dependency> </dependencies> </dependencyManagement> 在项目中增加依赖：
<dependency> <groupId>com.alibaba.cloud</groupId> <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId> </dependency> 设置配置 Nacos Config 使用 DataId 和 GROUP 确定一个配置。 Data ID: nacos-config.properties Group : DEFAULT_GROUP 配置格式: Properties 配置内容： user.name=nacos-config-properties user.age=90 DataId 默认取 application-name，Group默认：default_group，类型后缀默认：*.properties 使用 增加bootstrap.propertie，配置文件来配置 Nacos Server 地址
spring.application.name=base-provider spring.cloud.nacos.config.server-addr=peer1:8848,peer2:8848,peer3:8848 logging.level.com.alibaba.nacos.client.naming=error logging.level.com.alibaba.nacos.config.log.level=error logging.level.com.alibaba.nacos.naming.log.level=error # 可以使用 spring.cloud.nacos.config.file-extension=yaml 这里我们使用 @Value 注解来将对应的配置注入到 HeartController 的 userName 和 age 字段，并添加 @RefreshScope 打开动态刷新功能
使用方法一： @RequestMapping(&#34;/heart&#34;) @RefreshScope @RestController public class HeartController { @Value(&#34;${server."><meta name=generator content="Hugo 0.119.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><link rel=canonical href=https://linkall.pub/blog/nacos-config-usage/><meta property="og:title" content="nacos 配置中心的使用"><meta property="og:description" content="pom配置 在根pom.xml中设置
<dependencyManagement> <dependencies> <dependency> <groupId>com.alibaba.cloud</groupId> <artifactId>spring-cloud-alibaba-dependencies</artifactId> <version>2.2.1.RELEASE</version> <type>pom</type> <scope>import</scope> </dependency> </dependencies> </dependencyManagement> 在项目中增加依赖：
<dependency> <groupId>com.alibaba.cloud</groupId> <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId> </dependency> 设置配置 Nacos Config 使用 DataId 和 GROUP 确定一个配置。 Data ID: nacos-config.properties Group : DEFAULT_GROUP 配置格式: Properties 配置内容： user.name=nacos-config-properties user.age=90 DataId 默认取 application-name，Group默认：default_group，类型后缀默认：*.properties 使用 增加bootstrap.propertie，配置文件来配置 Nacos Server 地址
spring.application.name=base-provider spring.cloud.nacos.config.server-addr=peer1:8848,peer2:8848,peer3:8848 logging.level.com.alibaba.nacos.client.naming=error logging.level.com.alibaba.nacos.config.log.level=error logging.level.com.alibaba.nacos.naming.log.level=error # 可以使用 spring.cloud.nacos.config.file-extension=yaml 这里我们使用 @Value 注解来将对应的配置注入到 HeartController 的 userName 和 age 字段，并添加 @RefreshScope 打开动态刷新功能
使用方法一： @RequestMapping(&#34;/heart&#34;) @RefreshScope @RestController public class HeartController { @Value(&#34;${server."><meta property="og:type" content="article"><meta property="og:url" content="https://linkall.pub/blog/nacos-config-usage/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2020-07-16T19:44:53+00:00"><meta property="article:modified_time" content="2020-07-16T19:44:53+00:00"><meta itemprop=name content="nacos 配置中心的使用"><meta itemprop=description content="pom配置 在根pom.xml中设置
<dependencyManagement> <dependencies> <dependency> <groupId>com.alibaba.cloud</groupId> <artifactId>spring-cloud-alibaba-dependencies</artifactId> <version>2.2.1.RELEASE</version> <type>pom</type> <scope>import</scope> </dependency> </dependencies> </dependencyManagement> 在项目中增加依赖：
<dependency> <groupId>com.alibaba.cloud</groupId> <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId> </dependency> 设置配置 Nacos Config 使用 DataId 和 GROUP 确定一个配置。 Data ID: nacos-config.properties Group : DEFAULT_GROUP 配置格式: Properties 配置内容： user.name=nacos-config-properties user.age=90 DataId 默认取 application-name，Group默认：default_group，类型后缀默认：*.properties 使用 增加bootstrap.propertie，配置文件来配置 Nacos Server 地址
spring.application.name=base-provider spring.cloud.nacos.config.server-addr=peer1:8848,peer2:8848,peer3:8848 logging.level.com.alibaba.nacos.client.naming=error logging.level.com.alibaba.nacos.config.log.level=error logging.level.com.alibaba.nacos.naming.log.level=error # 可以使用 spring.cloud.nacos.config.file-extension=yaml 这里我们使用 @Value 注解来将对应的配置注入到 HeartController 的 userName 和 age 字段，并添加 @RefreshScope 打开动态刷新功能
使用方法一： @RequestMapping(&#34;/heart&#34;) @RefreshScope @RestController public class HeartController { @Value(&#34;${server."><meta itemprop=datePublished content="2020-07-16T19:44:53+00:00"><meta itemprop=dateModified content="2020-07-16T19:44:53+00:00"><meta itemprop=wordCount content="117"><meta itemprop=keywords content="nacos,"><meta name=twitter:card content="summary"><meta name=twitter:title content="nacos 配置中心的使用"><meta name=twitter:description content="pom配置 在根pom.xml中设置
<dependencyManagement> <dependencies> <dependency> <groupId>com.alibaba.cloud</groupId> <artifactId>spring-cloud-alibaba-dependencies</artifactId> <version>2.2.1.RELEASE</version> <type>pom</type> <scope>import</scope> </dependency> </dependencies> </dependencyManagement> 在项目中增加依赖：
<dependency> <groupId>com.alibaba.cloud</groupId> <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId> </dependency> 设置配置 Nacos Config 使用 DataId 和 GROUP 确定一个配置。 Data ID: nacos-config.properties Group : DEFAULT_GROUP 配置格式: Properties 配置内容： user.name=nacos-config-properties user.age=90 DataId 默认取 application-name，Group默认：default_group，类型后缀默认：*.properties 使用 增加bootstrap.propertie，配置文件来配置 Nacos Server 地址
spring.application.name=base-provider spring.cloud.nacos.config.server-addr=peer1:8848,peer2:8848,peer3:8848 logging.level.com.alibaba.nacos.client.naming=error logging.level.com.alibaba.nacos.config.log.level=error logging.level.com.alibaba.nacos.naming.log.level=error # 可以使用 spring.cloud.nacos.config.file-extension=yaml 这里我们使用 @Value 注解来将对应的配置注入到 HeartController 的 userName 和 age 字段，并添加 @RefreshScope 打开动态刷新功能
使用方法一： @RequestMapping(&#34;/heart&#34;) @RefreshScope @RestController public class HeartController { @Value(&#34;${server."></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">逆天改命</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked ttu">Blogs</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">nacos 配置中心的使用</h1><time class="f6 mv4 dib tracked" datetime=2020-07-16T19:44:53Z>July 16, 2020</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h2 id=pom配置>pom配置</h2><p>在根pom.xml中设置</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependencyManagement&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>com.alibaba.cloud<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>spring-cloud-alibaba-dependencies<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>2.2.1.RELEASE<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;type&gt;</span>pom<span style=color:#f92672>&lt;/type&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;scope&gt;</span>import<span style=color:#f92672>&lt;/scope&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencyManagement&gt;</span>
</span></span></code></pre></div><p>在项目中增加依赖：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>com.alibaba.cloud<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>spring-cloud-starter-alibaba-nacos-config<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></div><h2 id=设置配置>设置配置</h2><p>Nacos Config 使用 DataId 和 GROUP 确定一个配置。
<img src=https://camo.githubusercontent.com/b376cc3d409a74cd89b80cecbf8c1bde5ef58580/68747470733a2f2f696d672e616c6963646e2e636f6d2f7466732f544231596c693362555931674b306a535a464d58586157635658612d323433362d313133382e706e67 alt></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>Data</span> <span style=color:#e6db74>ID:    nacos-config.properties</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Group</span>  <span style=color:#f92672>:</span>    <span style=color:#e6db74>DEFAULT_GROUP</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>配置格式</span><span style=color:#f92672>:</span>    <span style=color:#e6db74>Properties</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>配置内容：</span>   <span style=color:#e6db74>user.name=nacos-config-properties</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>user.age</span><span style=color:#f92672>=</span><span style=color:#e6db74>90</span>
</span></span></code></pre></div><ul><li>DataId 默认取 application-name，Group默认：default_group，类型后缀默认：*.properties</li></ul><h2 id=使用>使用</h2><p>增加<code>bootstrap.propertie</code>，配置文件来配置 Nacos Server 地址</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>spring.application.name</span><span style=color:#f92672>=</span><span style=color:#e6db74>base-provider</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.cloud.nacos.config.server-addr</span><span style=color:#f92672>=</span><span style=color:#e6db74>peer1:8848,peer2:8848,peer3:8848</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>logging.level.com.alibaba.nacos.client.naming</span><span style=color:#f92672>=</span><span style=color:#e6db74>error</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>logging.level.com.alibaba.nacos.config.log.level</span><span style=color:#f92672>=</span><span style=color:#e6db74>error </span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>logging.level.com.alibaba.nacos.naming.log.level</span><span style=color:#f92672>=</span><span style=color:#e6db74>error </span>
</span></span><span style=display:flex><span><span style=color:#75715e># 可以使用 spring.cloud.nacos.config.file-extension=yaml </span>
</span></span></code></pre></div><p>这里我们使用 @Value 注解来将对应的配置注入到 HeartController 的 userName 和 age 字段，并添加 @RefreshScope 打开动态刷新功能</p><ul><li>使用方法一：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@RequestMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/heart&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RefreshScope</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HeartController</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${server.port}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> port<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${user.name}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    String userName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${user.age}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> age<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#f92672>......</span>
</span></span></code></pre></div><p>使用方法二：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Component</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RefreshScope</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NacosTestConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${user.name}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String userName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${user.age}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> age<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=启动脚本配置文件>启动脚本配置文件</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>nohup  java -jar *.jar --spring.profiles.active<span style=color:#f92672>=</span>test &amp;
</span></span></code></pre></div><h2 id=更多详细文档>更多详细文档</h2><ul><li><a href=https://github.com/alibaba/spring-cloud-alibaba/blob/master/spring-cloud-alibaba-docs/src/main/asciidoc-zh/nacos-config.adoc>Spring Cloud Alibaba Nacos Config</a></li><li><a href=https://github.com/alibaba/spring-cloud-alibaba/blob/master/spring-cloud-alibaba-examples/nacos-example/nacos-config-example/readme-zh.md>Nacos Config Example</a></li></ul><ul class=pa0><li class="list di"><a href=/tags/nacos/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">nacos</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7732072032123305" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block data-ad-client=ca-pub-7732072032123305 data-ad-slot=6735921740 data-ad-format=auto data-full-width-responsive=true></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://linkall.pub/>&copy; 逆天改命 2024</a><div><div class=ananke-socials></div></div></div></footer></body></html>