<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>逆天改命</title><meta name=google-adsense-account content="ca-pub-7732072032123305"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=keywords content><meta name=description content><meta name=generator content="Hugo 0.119.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><link href=/blog/index.xml rel=alternate type=application/rss+xml title=逆天改命><link href=/blog/index.xml rel=feed type=application/rss+xml title=逆天改命><link rel=canonical href=https://linkall.pub/blog/><meta property="og:title" content="Blogs"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://linkall.pub/blog/"><meta itemprop=name content="Blogs"><meta itemprop=description content><meta name=twitter:card content="summary"><meta name=twitter:title content="Blogs"><meta name=twitter:description content></head><body class="ma0 avenir bg-near-white"><header><div class="pb3-m pb6-l bg-black"><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">逆天改命</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav><div class="tc-l pv3 ph3 ph4-ns"><h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">Blogs</h1></div></div></header><main class=pb7 role=main><article class="pa3 pa4-ns nested-copy-line-height"><section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy mid-gray"></section><section class="flex-ns flex-wrap justify-around mt5"><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/run-dashboard/ class="link black dim">IDEA开启 Run DashBoard</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">打开项目内的.idea\workspace.xml，查找RunDashboard。如果不存在，则新建component节点：
&lt;component name="RunDashboard"> &lt;option name="configurationTypes"> &lt;set> &lt;option value="SpringBootApplicationConfigurationType" /> &lt;/set> &lt;/option> &lt;option name="ruleStates"> &lt;list> &lt;RuleState> &lt;option name="name" value="ConfigurationTypeDashboardGroupingRule" /> &lt;/RuleState> &lt;RuleState> &lt;option name="name" value="StatusDashboardGroupingRule" /> &lt;/RuleState> &lt;/list> &lt;/option> 如果存在，则在节点内增加：
&lt;option name="configurationTypes"> &lt;set> &lt;option value="SpringBootApplicationConfigurationType" /> &lt;/set> &lt;/option> 保存即可。</div><a href=/blog/run-dashboard/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/springboot-profile-config/ class="link black dim">Springboot 指定profile配置文件</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Maven启动指定Profile通过-P，如mvn spring-boot:run -Ptest，但这是Maven的Profile。
如果要指定spring-boot的spring.profiles.active，则必须使用mvn spring-boot:run -Drun.profiles=test
如果使用命令行直接运行jar文件，则使用java -jar -Dspring.profiles.active=test demo-0.0.1-SNAPSHOT.jar
注意：-Dspring.profiles.active=test的位置。
如果使用开发工具，运行Application.java文件启动，则增加参数&ndash;spring.profiles.active=test</div><a href=/blog/springboot-profile-config/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/mysql-bin-log-reverse/ class="link black dim">mysql bin-log 误操作数据修复</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">先说原理 基于全量备份，加bin-log，将数据恢复到误操作之前节点数据，然后跳过误操作，执行后面操作。使用binlog文件转成sql执行，导入到数据库。
查看binlog文件 如果有多个binlog日志也可以在Mysql命令行下查看当前binlog、切割binlog日志。切割完成binlog再次查看就会看到新的日志写入到新的binlog文件中。
mysql> show master status; +------------------+-----------+--------------+------------------+-------------------+ | File | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set | +------------------+-----------+--------------+------------------+-------------------+ | mysql-bin.000001 | 343629748 | | | | +------------------+-----------+--------------+------------------+-------------------+ 1 row in set (0.00 sec) mysql> flush logs; Query OK, 0 rows affected (0.01 sec) 找到binlog中错误的语句 使用mysqlbinlog命令加参数，可以指定时间段，和pos节点：
--start-position 起始点 --stop-position 结束点（不包含） --start-datetime=“2017--11-01 00:00:00” 起始时间 --stop-datetime="2017-11-11 00:00:00" 终止时间 -d db_name 指定数据库 -v 是显示出一些sql的信息 -vv 则是多一些注释性的东西 --base64-output=DECODE-ROWS 这个是把sql解码出来 可以binlog日志中找到错误语句执行的时间点，分别恢复错误语句前后的binlog日志为sql。也可以跳过此步，直接恢复整个binlog日志为sql，然后打开sql文件，删除错误语句。
可以根据时间点来确定误操作的确切时间 mysqlbinlog --no-defaults --database=order --start-datetime='2019-11-02 3:08' --stop-datetime='2019-11-02 23:08' --base64-output=DECODE-ROWS mysql-bin.</div><a href=/blog/mysql-bin-log-reverse/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/mysql-base-config/ class="link black dim">MySQL初始化基础配置</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">CentOS7安装Mysql5.7 https://75051685.xyz/archives/centos7-install-mysql
修改编码：/etc/my.cnf
[client] default-character-set = utf8 [mysqld] default-storage-engine = INNODB character-set-server = utf8 collation-server = utf8_general_ci # 不区分大小写 collation-server = utf8_bin # 区分大小写 collation-server = utf8_unicode_ci # 比 utf8_general_ci 更准确 lower_case_table_names=2 # 表名区分大小写 max_connections=1000 # 最大连接数 创建数据库和用户 # 创建数据库，编码utf8 CREATE DATABASE &lt;datebasename> CHARACTER SET utf8; # 创建用户，指定用户名，密码，访问主机 CREATE USER 'username'@'host' IDENTIFIED BY 'password'; # 设置权限 GRANT privileges ON databasename.tablename TO 'username'@'host'; # 显示权限 SHOW GRANTS FOR 'username'@'host'; # 回收用户权限 REVOKE privilege ON databasename.</div><a href=/blog/mysql-base-config/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/centos7-install-mysql/ class="link black dim">一步一步CentOS7 安装 MySQL5.7</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">说明： 此文章用于安装Oracle Mysql，而非MariaDB。
yum源处理 对于yum安装，需要知道yum源，参考官网信息即可：
https://dev.mysql.com/downloads/repo/yum/
同时贴出apt源：
https://dev.mysql.com/downloads/repo/apt/
选择下载，本文贴出两个地址一个是5.7，一个是8.0：
# 5.7 https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm # 8.0 最新版本（2018-12-27） https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm 根据两个地址的对比，其他版本链接请自行揣测。下载完后进行安装：
# 安装rpm包 sudo rpm -Uvh mysql57-community-release-el7-11.noarch.rpm # 查看yum yum repolist all | grep mysql # 显示结果 mysql-connectors-community/x86_64 MySQL Connectors Community mysql-tools-community/x86_64 MySQL Tools Community mysql57-community/x86_64 MySQL 5.7 Community Server 安装 sudo yum install mysql-community-server 启动 MySQL 服务 Mysql5.7版本默认设置了临时密码，需要在启动之后查看运行日志，里面会有临时密码显示：
sudo cat /var/log/mysqld.log | grep 'temporary password' 修改密码 $ mysql -uroot -p #输入查看到的密码 # 新密码要求符合密码规范。大小写，特殊字符数字等。 mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY '!</div><a href=/blog/centos7-install-mysql/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/nginx-redirect-80-to-443/ class="link black dim">nginx 80端口重定向到443端口</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">使用如下配置即可
server { listen 80; server_name www.test.com; rewrite ^(.*)$ https://${server_name}$1 permanent; }</div><a href=/blog/nginx-redirect-80-to-443/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/how-to-debug-php-fpm-500/ class="link black dim">php-fpm 报错500排查</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">TOC
php-fpm 报错500 php-fpm报错500，使用nginx转发，同时有没有日志。
思路将错误暴露出来：
使用phpinfo将php.ini的路径找出 新建一个页面，内容如下：
&lt;?php phpinfo(); ?> 找到php.ini的位置：
/usr/local/php/etc/php.ini 编辑php.ini 查找 display_errors，将配置改为On，即为显示错误。
display_errors = On 记得处理好问题后改回去。</div><a href=/blog/how-to-debug-php-fpm-500/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/mysql-sql-monitor/ class="link black dim">使用general_log来对Mysql SQL语句监控查看的记录</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">查看日志位置：
show global variables like '%general%'; +——————+———-+ |Variable_name|Value| +——————+———-+ |general_log|OFF| |general_log_file|/data0/logs/mysql/general.log| +——————+———-+ 设置 SET GLOBAL general_log = 'ON';
使用tail -f 日志位置 查看即时日志。
临时开启日志记录
set global general_log='ON'; 这时执行的所有sql都会被记录下来，但是如果重启mysql就会停止记录需要重新设置
查看日志
tail -f /data0/logs/mysql/general.log 查看全部
cat /data0/logs/mysql/general.log 查看是否开启binlog
show variables like “log_bin” ; 查看当前的binlog日志
show master status ;</div><a href=/blog/mysql-sql-monitor/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/centos7-sshd-port/ class="link black dim">CentOS7修改服务器ssh端口号</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">版本 CentOS7
一般情况 编辑sshd的配置文件，增加端口既可
vi /etc/ssh/sshd_config ---- Port 22 Port 1022 然后重启服务
systemctl status sshd.service 开启了SELinux策略 如果开启了SELinux策略，则可以使用下面命令查看端口状态：
semanage port -l | grep ssh 增加访问端口
semanage port -a -t ssh_port_t -p tcp 1022 防火墙配置 firewall-cmd --list-all firewall-cmd --zone=public --add-port=1022/tcp --permanent firewall-cmd --reload</div><a href=/blog/centos7-sshd-port/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/maven-respoistory/ class="link black dim">MAVEN发布项目到私服，镜像</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">snapshot和release的区别 snapshot快照库，开发过程中随时发布，无需更改版本号，适用不稳定的开发阶段 release，版本稳定后，可以发布到此库。 快照版本后缀-SNAPSHOT，发布到不同的库完全是依靠版本号确定，程序自动判断。 快照版本示例
&lt;groupId>com.alexdev&lt;/groupId> &lt;artifactId>mm&lt;/artifactId> &lt;version>0.1-SNAPSHOT&lt;/version> &lt;packaging>jar&lt;/packaging> 发布到私服 一般私服使用Nexus SSO搭建。在官网下载安装包安装即可（ https://www.sonatype.com/nexus-repository-oss ）。目前版本：Nexus Repository Manager OSS 3.x （2019-01-08） 默认密码：admin/admin123 安装完后设置maven的setting文件：
&lt;server> &lt;id>releases&lt;/id> &lt;username>admin&lt;/username> &lt;password>admin123&lt;/password> &lt;/server> &lt;server> &lt;id>snapshots&lt;/id> &lt;username>admin&lt;/username> &lt;password>admin123&lt;/password> &lt;/server> 在如上配置设置了两个账户密码，这个账户密码是nexus的账户密码，如需新建，请与之对应。 之后设置项目的pom文件，注意id和settting.xml文件中的id需相对应。代表发布到不同的代码库中的不同账户和密码。对于url地址，不同的版本可能不同。
&lt;!-- 项目发布管理 --> &lt;distributionManagement> &lt;repository> &lt;id>releases&lt;/id> &lt;name>User Project Release&lt;/name> &lt;url>http://192.168.1.53:8081/repository/maven-releases/&lt;/url> &lt;/repository> &lt;snapshotRepository> &lt;id>snapshots&lt;/id> &lt;name>User Project SNAPSHOTS&lt;/name> &lt;url>http://192.168.1.53:8081/repository/maven-snapshots/&lt;/url> &lt;/snapshotRepository> &lt;/distributionManagement> 发布到私服的命令：
mvn clean deploy -X -Dmaven.test.skip=true 如果看到BUILD SUCCESS字样，既可在仓库里查看相应的包。
Tips 如果出现400，需要注意项目下的pom.xml文件和maven使用的setting.xml文件的配置是否一致。 如果出现401，需要检查maven使用的setting.xml中的帐号和密码是否正确，相应的repository是否为“Allow Redeploy”。 镜像mirror 镜像的目的是为了解决访问速度问题，个人开发可以设置国内镜像，例如阿里云提供的的，在setting.xml文件中添加
&lt;mirror> &lt;id>alimaven&lt;/id> &lt;name>aliyun maven&lt;/name> &lt;url>http://maven.</div><a href=/blog/maven-respoistory/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div></section><ul class="pagination pagination-default"><li class=page-item><a href=/blog/ aria-label=First class=page-link role=button><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/blog/page/6/ aria-label=Previous class=page-link role=button><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a href=/blog/page/5/ aria-label="Page 5" class=page-link role=button>5</a></li><li class=page-item><a href=/blog/page/6/ aria-label="Page 6" class=page-link role=button>6</a></li><li class="page-item active"><a aria-current=page aria-label="Page 7" class=page-link role=button>7</a></li><li class=page-item><a href=/blog/page/8/ aria-label="Page 8" class=page-link role=button>8</a></li><li class=page-item><a href=/blog/page/9/ aria-label="Page 9" class=page-link role=button>9</a></li><li class=page-item><a href=/blog/page/8/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/blog/page/9/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://linkall.pub/>&copy; 逆天改命 2024</a><div><div class=ananke-socials></div></div></div></footer></body></html>