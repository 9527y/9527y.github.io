<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>逆天改命</title><meta name=google-adsense-account content="ca-pub-7732072032123305"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=keywords content><meta name=description content><meta name=generator content="Hugo 0.119.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><link href=/blog/index.xml rel=alternate type=application/rss+xml title=逆天改命><link href=/blog/index.xml rel=feed type=application/rss+xml title=逆天改命><link rel=canonical href=https://linkall.pub/blog/><meta property="og:title" content="Blogs"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://linkall.pub/blog/"><meta itemprop=name content="Blogs"><meta itemprop=description content><meta name=twitter:card content="summary"><meta name=twitter:title content="Blogs"><meta name=twitter:description content></head><body class="ma0 avenir bg-near-white"><header><div class="pb3-m pb6-l bg-black"><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">逆天改命</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav><div class="tc-l pv3 ph3 ph4-ns"><h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">Blogs</h1></div></div></header><main class=pb7 role=main><article class="pa3 pa4-ns nested-copy-line-height"><section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy mid-gray"></section><section class="flex-ns flex-wrap justify-around mt5"><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/uniapp-canvas-helper/ class="link black dim">uni-app上canvas绘制图片助手，一个json就制作分享朋友圈海报</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">[TOC]
uniapp-canvas-drawer uniapp-canvas-drawer是基于 kuckboy1994 的 mp_canvas_drawer 移植的 uni-app 版本。之后同步更新。
下载地址 uniapp-canvas-drawer。
当前环境下，大家都非常需要分享到朋友圈这个功能，但是实现起来各有心酸（坑比较多），所以才有了如下的 canvas 绘图工具。
具有如下特性： 简单易用 一个 json 搞定绘制图片 功能全满足 90% 的使用场景 1、绘制文本（换行、超出内容省略号、中划线、下划线、文本加粗） 2、绘制图片 3、绘制矩形 4、保存图片 5、多图绘制 6、代码量小
体验 git clone https://github.com/quanweiwang/uniapp-canvas-drawer 想在手机上使用配置自己的 appid 即可。
使用 1、clone 到本地
git clone https://github.com/quanweiwang/uniapp-canvas-drawer 2、把 components 中的 uniapp-canvas-drawer 拷贝到自己项目下。
3、在 pages.json 使用页面注册组件
{ "path": "pages/index/index", "style": { "navigationBarTitleText": "uni-app", "usingComponents": { "canvasdrawer": "/components/uniapp-canvas-drawer/uniapp-canvas-drawer" } } } 4、在页面 **.vue 文件中加入如下代码
&lt;canvasdrawer painting="{{painting}}" bind:getImage="eventGetImage"/> painting 是需要传入的 json。 getImage 方法是绘图完成之后的回调函数，在 event.</div><a href=/blog/uniapp-canvas-helper/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/too-many-open-files/ class="link black dim">java:too many open files 解决办法</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">[TOC]
产生原因 Linux 中,文件是一个字节序列。这种简单但强大的定义和它的实现使得系统中的所有东西都可以用文件来表示。这里提示的打开文件过多，不仅仅是普通的文件，也包括通讯链接socket，监听端口。这个错误通常是句柄数超出系统限制。
引起的原因就是进程在某个时刻打开了超过系统限制的文件数量以及通讯链接数。
通过命令ulimit -a可以查看当前系统设置的最大句柄数是多少： $ ulimit -a core file size (blocks, -c) 0 data seg size (kbytes, -d) unlimited scheduling priority (-e) 0 file size (blocks, -f) unlimited pending signals (-i) 15065 max locked memory (kbytes, -l) 64 max memory size (kbytes, -m) unlimited open files (-n) 1024 pipe size (512 bytes, -p) 8 POSIX message queues (bytes, -q) 819200 real-time priority (-r) 0 stack size (kbytes, -s) 8192 cpu time (seconds, -t) unlimited max user processes (-u) 15065 virtual memory (kbytes, -v) unlimited file locks (-x) unlimited open files那一行就代表系统目前允许单个进程打开的最大句柄数，这里是1024。</div><a href=/blog/too-many-open-files/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/uniapp-multi-lang/ class="link black dim">uniapp 使用 i18n 实现多语言切换</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">[TOC]
主题思想 使用vue-i18n实现国际化。官方文档
npm 安装 npm install vue-i18n --save 在 main.js 中引入
import Vue from 'vue'; import App from './App'; import VueI18n from 'vue-i18n' // ★ import messages from './commom/lang.js' // ★ Vue.use(VueI18n) // ★ Vue.config.productionTip = false; const i18n = new VueI18n({ // ★ locale: 'zh-CN', // 默认选择的语言 messages }) App.mpType = 'app'; Vue.prototype._i18n = i18n // ★ const app = new Vue({ i18n, // ★ ...App }); app.$mount(); 其中改变locale的取值可以改变语言的类型，messages的内容我放到一个独立的lang.</div><a href=/blog/uniapp-multi-lang/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/nginx-static-config/ class="link black dim">Nginx 静态文件服务配置及优化</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">[TOC]
根目录和索引文件 root 指令指定将用于搜索文件的根目录。 为了获取所请求文件的路径，NGINX 将请求 URI 附加到 root 指令指定的路径。该指令可以放在 http {}，server {} 或 location {} 上下文中的任何级别。在下面的示例中，为虚拟服务器定义了 root 指令。 它适用于未包含根指令的所有location {} 块，以显式重新定义根：
server { root /www/data; location / { } location /images/ { } location ~ \.(mp3|mp4) { root /www/media; } } 在这里，NGINX 针对 /images/ 开头的 URI 将在文件系统的 /www/ data/images/ 目录中搜索相应文件。 如果 URI 以 .mp3 或 .mp4 扩展名结尾，则 NGINX 会在 /www/media/ 目录中搜索该文件，因为它是在匹配的位置块中定义的。
如果请求以 / 结尾，则 NGINX 将其视为对目录的请求，并尝试在目录中查找索引文件。index 指令定义索引文件的名称（默认值为 index.html）。要继续该示例，如果请求 URI 是 /images/some/path/，则 NGINX 会返回文件 /www/data/images/some/path/index.</div><a href=/blog/nginx-static-config/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/mybatis-auto-id/ class="link black dim">MyBatis获取插入记录的自增长字段值</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">MyBatis Plus MyBatis plus 的insert语句，默认会给参数回加上自增主键的值。
MyBatis 再写xml时候注意，需要指定参数类型，parameterType，并加上useGeneratedKeys="true" 和指定主键字段：keyProperty
&lt;insert id="insert" parameterType="com.helloworld.User" &lt;!--指定参数类型--> useGeneratedKeys="true" keyProperty="id" &lt;!--指定主键字段--> ></div><a href=/blog/mybatis-auto-id/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/format-disk-mount-disk/ class="link black dim">格式化并挂载数据盘</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">注意：
格式化后，数据盘中的数据将被全部清空。请在格式化之前，确保数据盘中没有数据或已对重要数据进行备份。为避免服务发生异常，格式化前请确保云服务器已停止对外服务。 手动格式化并挂载数据盘
请根据以下步骤格式化并挂载数据盘。
注意：
执行下述命令时，请注意修改数据盘盘符，本示例假设数据盘盘符为vdb。
步骤一：格式化数据盘 注意： 在进行分区格式化时，开发者可以自行决定文件系统的格式，如ext3、ext4等。示例采用ext4格式。
执行 mkfs 命令对数据盘进行格式化：
mkfs.ext4 /dev/vdb 步骤二：挂载数据盘 创建挂载点 data 目录：
mkdir /data 挂载新分区：
mount /dev/vdb /data 验证数据盘是否挂载成功：
df -h 出现如下信息则说明挂载成功，即 Linux 服务器已经挂载数据盘：
Filesystem Size Used Avail Use% Mounted on /dev/vdb 50G 53M 47G 1% /data 步骤三：实现开机自动挂载 添加数据盘挂载信息至/etc/fstab，实现开机自动挂载。
当您希望云服务器在重启或开机时能自动挂载数据盘，必须将数据盘挂载信息添加到/etc/fstab中。否则云服务器重启或开机后，不会自动挂载数据盘。
使用以下命令添加分区信息：
echo '/dev/vdb /data ext4 defaults 0 0' >> /etc/fstab 使用以下命令查看分区信息：
cat /etc/fstab 出现如下信息则说明添加数据盘挂载信息成功：
/dev/vdb /data ext4 defaults 0 0 自动格式化并挂载数据盘 在腾讯云的 Linux 服务器上，您可以通过运行以下 Shell 脚本来实现自动格式化和挂载数据盘：</div><a href=/blog/format-disk-mount-disk/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/apache-maven-source-plugin-usage/ class="link black dim">Apache Maven Source Plugin-Maven打包源码到私服</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">使用插件Apache Maven Source Plugin 官网说明：https://maven.apache.org/plugins/maven-source-plugin/index.html
Goals Overview source:jar 是默认的。 The Source Plugin has five goals:
source:aggregate aggregrates sources for all modules in an aggregator project. source:jar is used to bundle the main sources of the project into a jar archive. source:test-jar on the other hand, is used to bundle the test sources of the project into a jar archive. source:jar-no-fork is similar to jar but does not fork the build lifecycle.</div><a href=/blog/apache-maven-source-plugin-usage/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/check-port/ class="link black dim">各个系统查看端口情况的方法</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">查看本机占用情况 windows windows常用命令netstat，与find组合使用
netsat -an | find "8080" mac lsof -i 8090 linux netstat -anptl | grep 8080 查看远程端口是否开启 nc nc -v -n 127.0.0.1 22 wget wget 192.168.1.1:6379 curl curl 192.168.1.1:6379</div><a href=/blog/check-port/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/mysql-master-slave/ class="link black dim">Mysql5.7主从复制</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">环境 Linux:CentOS7 Mysql:5.7 服务器:腾讯云
安装 见：https://blog.csdn.net/haxyek/article/details/85273553 安装后可能需要的初始化命令：
mysqld --initialize-insecure --user=mysql --explicit_defaults_for_timestamp 主从复制原理 从服务器读取主服务器的binlog，进行数据复制。
主从复制实践 主服务器配置： 第一步：修改my.cnf文件 [mysqld]段增加
#启动而进制日志 log-bin=mysql-bin #服务器唯一ID，一般取IP最后一段 server-id=83 第二步：重启mysql服务 systemctl restart mysqld 第三步：主机给从机授权备份权限 登录到主机的mysql
myysql> GRANT REPLication slave on *.* to '从机用户名'@'从机ip地址' identified by '从机密码'; 示例
myysql> GRANT REPLication slave on *.* to 'slave'@'172.32.1.16' identified by 'slave_password'; 第四步：刷新权限 mysql>flush privileges; 第五步：查询master的状态 mysql>show master status; +------------------+----------+--------------+------------------+-------------------+ | File | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set | +------------------+----------+--------------+------------------+-------------------+ | mysql-bin.</div><a href=/blog/mysql-master-slave/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Blogs</span><h1 class="f3 near-black"><a href=/blog/mysql-dbname-tablename/ class="link black dim">Mysql 数据库名、表名大小写</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">[mysqld] lower-case-table-names=0 ** windows默认为0，unix默认为1； **
变量lower-case-table-names的取值 取值范围有三个，分别是0、1、2.
设置成0：表名按你写的SQL大小写存储，大写就大写小写就小写，比较时大小写敏感。 设置成1：表名转小写后存储到硬盘，比较时大小写不敏感。 设置成2：表名按你写的SQL大小写存储，大写就大写小写就小写，比较时统一转小写比较。 这个选项不仅仅适用于表名的大小写敏感，同样适用于数据库名和表别名。</div><a href=/blog/mysql-dbname-tablename/ class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a></div></div></div></section><ul class="pagination pagination-default"><li class=page-item><a href=/blog/ aria-label=First class=page-link role=button><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/blog/page/5/ aria-label=Previous class=page-link role=button><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a href=/blog/page/4/ aria-label="Page 4" class=page-link role=button>4</a></li><li class=page-item><a href=/blog/page/5/ aria-label="Page 5" class=page-link role=button>5</a></li><li class="page-item active"><a aria-current=page aria-label="Page 6" class=page-link role=button>6</a></li><li class=page-item><a href=/blog/page/7/ aria-label="Page 7" class=page-link role=button>7</a></li><li class=page-item><a href=/blog/page/8/ aria-label="Page 8" class=page-link role=button>8</a></li><li class=page-item><a href=/blog/page/7/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/blog/page/9/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://linkall.pub/>&copy; 逆天改命 2024</a><div><div class=ananke-socials></div></div></div></footer></body></html>