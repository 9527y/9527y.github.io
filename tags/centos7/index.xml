<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>centos7 :: Tag :: 逆天改命</title><link>https://linkall.pub/tags/centos7/index.html</link><description/><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Mon, 12 Oct 2020 16:33:26 +0000</lastBuildDate><atom:link href="https://linkall.pub/tags/centos7/index.xml" rel="self" type="application/rss+xml"/><item><title>Centos7 安装 Python3.8</title><link>https://linkall.pub/centos-install-python3/index.html</link><pubDate>Mon, 12 Oct 2020 16:33:26 +0000</pubDate><guid>https://linkall.pub/centos-install-python3/index.html</guid><description>目录TOC
Step 1 – 安装前准备 可以切换到阿里云yum源：
sudo yum -y update必备包
sudo yum -y install wget yum-utils gcc openssl-devel bzip2-devel libffi-devel zlib zlib-develStep 2 – 源码下载编译 cd /tmp/ wget https://www.python.org/ftp/python/3.8.6/Python-3.8.6.tgz tar xzf Python-3.8.6.tgz cd Python-3.8.6sudo ./configure --prefix=/opt/python38 --enable-optimizations --with-lto --with-system-ffi --with-computed-gotos --enable-loadable-sqlite-extensions sudo make -j "$(nproc)" sudo make altinstall如果提示：
/usr/local/bin/python: can't decompress data; zlib not available安装目录/Modules/Setup ，将#zlib zlibmodule.c -I$(prefix)/include -L$(exec_prefix)/lib -lz的注释去掉。
Step 3 - 安装后操作 sudo ln -s /opt/python38/bin/python3.8 /opt/python38/bin/python3 sudo ln -s /opt/python38/bin/python3.</description></item><item><title>CentOS7使用阿里yum源</title><link>https://linkall.pub/centos-use-aliyun-yum-source/index.html</link><pubDate>Mon, 12 Oct 2020 16:31:14 +0000</pubDate><guid>https://linkall.pub/centos-use-aliyun-yum-source/index.html</guid><description>目录 [toc]
禁用 yum插件 fastestmirror 修改插件的配置文件 cp /etc/yum/pluginconf.d/fastestmirror.conf /etc/yum/pluginconf.d/fastestmirror.conf.bak vi /etc/yum/pluginconf.d/fastestmirror.conf enabled = 1由1改为0，禁用该插件
修改yum的配置文件 cp /etc/yum.conf /etc/yum.conf.bak vi /etc/yum.confplugins=1改为0，不使用插件
获取阿里云 repo cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo cp /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo.bak wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo清理缓存，重建缓存 yum clean all yum makecache完工。</description></item><item><title>ssh 公钥认证方式登录（免密登录）</title><link>https://linkall.pub/linux-ssh-login/index.html</link><pubDate>Wed, 01 Jul 2020 22:41:20 +0000</pubDate><guid>https://linkall.pub/linux-ssh-login/index.html</guid><description>一般情况下,我们用ssh远程登录到服务器时，要输入用户名和密码。这对经常维护系统的人来说，很麻烦。怎样才能不用密码直接登录到远程的linux/unix服务器呢？ssh公钥认证可以解决这个问题。
公钥认证，是使用一对加密字符串，一个称为公钥(public key)， 任何人都可以看到其内容，用于加密；另一个称为密钥(private key)，只有拥有者才能看到，用于解密。 通过公钥加密过的密文使用密钥可以轻松解密，但根据公钥来猜测密钥却十分困难。
服务器端 在使用公钥认证之前，先检查一下服务器的ssh配置文件/etc/ssh/sshd_config
RSAAuthentication yes # 启用 RSA 认证，默认为yes PubkeyAuthentication yes # 启用公钥认证，默认为yes如果配置没有问题，那么你就可以进行下一步了。
例子 下面我们举个例子，比如有两台机器，客户机A与服务器B，想用ssh公钥认证方式从A机器用client用户登录到B机器的server用户，方法如下：
在客户机A上生成公钥与密钥 [client@test ~]$ ssh-keygen -t rsa Generating public/private rsa key pair. Enter file in which to save the key (/home/client/.ssh/id_rsa): #此处直接按回车即可 Created directory '/home/client/.ssh'. Enter passphrase (empty for no passphrase): #此处直接按回车即可 Enter same passphrase again: #此处直接按回车即可 Your identification has been saved in /home/client/.ssh/id_rsa. Your public key has been saved in /home/client/.</description></item><item><title>Nginx 静态文件服务配置及优化</title><link>https://linkall.pub/nginx-static-config/index.html</link><pubDate>Thu, 11 Jun 2020 10:22:54 +0000</pubDate><guid>https://linkall.pub/nginx-static-config/index.html</guid><description>[TOC]
根目录和索引文件 root 指令指定将用于搜索文件的根目录。 为了获取所请求文件的路径，NGINX 将请求 URI 附加到 root 指令指定的路径。该指令可以放在 http {}，server {} 或 location {} 上下文中的任何级别。在下面的示例中，为虚拟服务器定义了 root 指令。 它适用于未包含根指令的所有location {} 块，以显式重新定义根：
server { root /www/data; location / { } location /images/ { } location ~ \.(mp3|mp4) { root /www/media; } }在这里，NGINX 针对 /images/ 开头的 URI 将在文件系统的 /www/ data/images/ 目录中搜索相应文件。 如果 URI 以 .mp3 或 .mp4 扩展名结尾，则 NGINX 会在 /www/media/ 目录中搜索该文件，因为它是在匹配的位置块中定义的。
如果请求以 / 结尾，则 NGINX 将其视为对目录的请求，并尝试在目录中查找索引文件。index 指令定义索引文件的名称（默认值为 index.html）。要继续该示例，如果请求 URI 是 /images/some/path/，则 NGINX 会返回文件 /www/data/images/some/path/index.</description></item><item><title>格式化并挂载数据盘</title><link>https://linkall.pub/format-disk-mount-disk/index.html</link><pubDate>Tue, 02 Jun 2020 17:57:34 +0000</pubDate><guid>https://linkall.pub/format-disk-mount-disk/index.html</guid><description>注意：
格式化后，数据盘中的数据将被全部清空。请在格式化之前，确保数据盘中没有数据或已对重要数据进行备份。为避免服务发生异常，格式化前请确保云服务器已停止对外服务。 手动格式化并挂载数据盘
请根据以下步骤格式化并挂载数据盘。
注意：
执行下述命令时，请注意修改数据盘盘符，本示例假设数据盘盘符为vdb。
步骤一：格式化数据盘 注意： 在进行分区格式化时，开发者可以自行决定文件系统的格式，如ext3、ext4等。示例采用ext4格式。
执行 mkfs 命令对数据盘进行格式化：
mkfs.ext4 /dev/vdb 步骤二：挂载数据盘 创建挂载点 data 目录：
mkdir /data 挂载新分区：
mount /dev/vdb /data 验证数据盘是否挂载成功：
df -h 出现如下信息则说明挂载成功，即 Linux 服务器已经挂载数据盘：
Filesystem	Size Used Avail Use% Mounted on /dev/vdb	50G 53M 47G 1%	/data 步骤三：实现开机自动挂载 添加数据盘挂载信息至/etc/fstab，实现开机自动挂载。
当您希望云服务器在重启或开机时能自动挂载数据盘，必须将数据盘挂载信息添加到/etc/fstab中。否则云服务器重启或开机后，不会自动挂载数据盘。
使用以下命令添加分区信息：
echo '/dev/vdb /data ext4 defaults 0 0' >> /etc/fstab 使用以下命令查看分区信息：
cat /etc/fstab 出现如下信息则说明添加数据盘挂载信息成功：
/dev/vdb /data ext4 defaults 0 0 自动格式化并挂载数据盘 在腾讯云的 Linux 服务器上，您可以通过运行以下 Shell 脚本来实现自动格式化和挂载数据盘：</description></item><item><title>一步一步CentOS7 安装 MySQL5.7</title><link>https://linkall.pub/centos7-install-mysql/index.html</link><pubDate>Mon, 01 Jun 2020 01:40:01 +0000</pubDate><guid>https://linkall.pub/centos7-install-mysql/index.html</guid><description>说明： 此文章用于安装Oracle Mysql，而非MariaDB。
yum源处理 对于yum安装，需要知道yum源，参考官网信息即可：
https://dev.mysql.com/downloads/repo/yum/
同时贴出apt源：
https://dev.mysql.com/downloads/repo/apt/
选择下载，本文贴出两个地址一个是5.7，一个是8.0：
# 5.7 https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm # 8.0 最新版本（2018-12-27） https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm 根据两个地址的对比，其他版本链接请自行揣测。下载完后进行安装：
# 安装rpm包 sudo rpm -Uvh mysql57-community-release-el7-11.noarch.rpm # 查看yum yum repolist all | grep mysql # 显示结果 mysql-connectors-community/x86_64 MySQL Connectors Community mysql-tools-community/x86_64 MySQL Tools Community mysql57-community/x86_64 MySQL 5.7 Community Server 安装 sudo yum install mysql-community-server启动 MySQL 服务 Mysql5.7版本默认设置了临时密码，需要在启动之后查看运行日志，里面会有临时密码显示：
sudo cat /var/log/mysqld.log | grep 'temporary password' 修改密码 $ mysql -uroot -p #输入查看到的密码 # 新密码要求符合密码规范。大小写，特殊字符数字等。 mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY '!</description></item><item><title>CentOS7修改服务器ssh端口号</title><link>https://linkall.pub/centos7-sshd-port/index.html</link><pubDate>Sun, 31 May 2020 18:11:45 +0000</pubDate><guid>https://linkall.pub/centos7-sshd-port/index.html</guid><description>版本 CentOS7
一般情况 编辑sshd的配置文件，增加端口既可
vi /etc/ssh/sshd_config ---- Port 22 Port 1022然后重启服务
systemctl status sshd.service开启了SELinux策略 如果开启了SELinux策略，则可以使用下面命令查看端口状态：
semanage port -l | grep ssh增加访问端口
semanage port -a -t ssh_port_t -p tcp 1022防火墙配置 firewall-cmd --list-all firewall-cmd --zone=public --add-port=1022/tcp --permanent firewall-cmd --reload</description></item><item><title>CentOS7 firewall 开放端口和关闭防火墙</title><link>https://linkall.pub/centos7-firewalld/index.html</link><pubDate>Sun, 31 May 2020 17:30:41 +0000</pubDate><guid>https://linkall.pub/centos7-firewalld/index.html</guid><description>CentOS7开放端口，重载防火墙配置
sudo firewall-cmd --zone=public --add-port=6379/tcp --permanent sudo firewall-cmd --reload检查防火墙规则命令
firewall-cmd --list-all会显示：
public (active) # 状态 target: default icmp-block-inversion: no interfaces: ens33 #接口信息 sources: services: ssh dhcpv6-client #开放服务 ports: 6379/tcp # 开放端口 protocols: masquerade: no forward-ports: source-ports: icmp-blocks: rich rules: 其他命令：
# 重启防火墙 systemctl restart firewalld # 检查状态 firewall-cmd --state firewall-cmd --list-all #禁用 firewall systemctl disable firewalld systemctl stop firewalld # 查询防火墙状态 systemctl status firewalld #启用防火墙 systemctl enable firewalld systemctl start firewalld # 查询防火墙状态 systemctl status firewalld</description></item><item><title>CentOS7 重置root密码</title><link>https://linkall.pub/centos7-reset-root-password/index.html</link><pubDate>Sun, 24 May 2020 18:15:34 +0000</pubDate><guid>https://linkall.pub/centos7-reset-root-password/index.html</guid><description>1 - 在启动grub菜单，选择编辑选项启动 2 - 按键盘e键，来进入编辑界面 3 - 找到Linux 16的那一行，将ro改为rw init=/sysroot/bin/sh 4 - 现在按下 Control+x，使用单用户模式启动 5 - 现在，可以使用下面的命令访问系统 chroot /sysroot
6 - 重置密码 passwd root
7 - 更新系统信息 touch /.autorelabel
8 - 退出chroot exit
9 - 重启你的系统 reboot</description></item></channel></rss>